<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KW8B67X6H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KW8B67X6H4');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wine Card Generator - Pio Cesare Barolo Mosconi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            /* Premium Red Wine Theme - Darker, more prestigious */
            --primary-color: #4a0e0b;
            --accent-color: #ddc074;
            --dark-color: #1a0606;
            --light-bg-color: #faf9f5;
            --rgb-primary-color: 74,14,11;
        }

        body {
            font-family: 'Garamond', serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-bg-color);
            color: #333333;
            line-height: 1.6;
        }
        
        .edit-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            flex-direction: column;
        }
        
        .edit-controls button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .edit-btn {
            background: var(--primary-color);
            color: white;
        }
        
        .edit-btn:hover {
            background: var(--dark-color);
        }
        
        .download-btn {
            background: #2c5e19;
            color: white;
        }
        
        .download-btn:hover {
            background: #387a25;
        }
        
        .save-btn {
            background: var(--accent-color);
            color: var(--primary-color);
        }
        
        .save-btn:hover {
            background: #c9b065;
        }
        
        .editable {
            transition: all 0.3s;
            border-radius: 3px;
            padding: 2px;
        }
        
        .editable:hover {
            background-color: rgba(var(--rgb-primary-color), 0.1);
            cursor: pointer;
        }
        
        .editable.editing {
            background-color: #fff;
            border: 2px solid var(--primary-color);
            outline: none;
            padding: 4px;
        }
        
        .editable input,
        .editable textarea {
            border: none;
            background: transparent;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
            width: 100%;
            outline: none;
            resize: none;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: #ffffff;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><polygon points="0,100 100,0 100,100" fill="rgba(255,255,255,0.05)"/></svg>') no-repeat center;
            background-size: cover;
        }

        body.edit-mode header {
            color: #000000;
        }
        
        .content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .card-container {
            position: relative;
            margin-bottom: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid var(--accent-color);
        }
        
        .wine-card {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        .logo-background {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            opacity: 0.4;
            pointer-events: none;
            text-align: center;
        }
        
        .logo-background img {
            width: 250px;
            height: 250px;
            object-fit: contain;
            filter: brightness(0.6) sepia(0.3);
        }
        
        .wine-info h1 {
            color: var(--primary-color);
            margin-top: 0;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            font-size: 1.8em;
        }
        
        .wine-info h2 {
            font-style: italic;
            font-weight: normal;
            margin-top: 5px;
            color: var(--dark-color);
        }
        
        .specs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .spec-item {
            display: flex;
        }
        
        .spec-item strong {
            min-width: 120px;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .chart-container {
            position: relative;
            padding: 20px;
            z-index: 2;
            transition: min-height 0.3s ease;
        }
        
        .chart-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            position: relative;
            z-index: 3;
        }
        
        .chart-title {
            color: var(--primary-color);
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            position: relative;
            z-index: 3;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .radar-chart, .aroma-chart {
            width: 100%;
            height: auto;
            position: relative;
            z-index: 3;
        }
        
        .flavor-profile {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
            position: relative;
            z-index: 3;
        }
        
        .flavor-category {
            padding: 15px;
            background: rgba(var(--rgb-primary-color), 0.05);
            border-radius: 8px;
            border: 1px solid rgba(var(--rgb-primary-color), 0.1);
        }
        
        .flavor-category h3 {
            color: var(--primary-color);
            margin-top: 0;
            font-size: 1.2em;
        }
        
        footer {
            background: linear-gradient(135deg, var(--dark-color), var(--primary-color));
            color: var(--accent-color);
            text-align: center;
            padding: 15px;
            margin-top: 20px;
        }
        
        .wine-type-indicator {
            display: inline-block;
            padding: 5px 10px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
            vertical-align: middle;
            position: relative;
            padding-right: 25px;
        }

        .wine-type-indicator::after {
            content: '▼';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 10px;
            color: white;
            pointer-events: none;
            display: none;
        }

        .wine-type-indicator.editing::after {
            display: block; 
        }

        .wine-type-indicator select {
            background-color: var(--primary-color);
            color: white;
            border: 1px solid white;
            border-radius: 4px;
            padding: 3px 5px;
            font-size: 12px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
        }

        #wineTypeInstruction {
            font-size: 10px;
            color: var(--dark-color);
            margin-left: 5px;
            display: none;
        }
        
        .chart-editor {
            background: rgba(255,255,255,0.98);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            display: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 100%;
            overflow: visible;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .chart-editor.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .chart-editor h4 {
            margin: 0 0 15px 0;
            color: var(--primary-color);
            text-align: center;
            font-size: 16px;
        }
        
        .slider-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .slider-item {
            display: grid;
            grid-template-columns: 90px 1fr 30px;
            align-items: center;
            gap: 12px;
            padding: 8px;
            background: var(--light-bg-color);
            border-radius: 6px;
        }
        
        .slider-item label {
            font-size: 13px;
            color: var(--primary-color);
            font-weight: 600;
            text-align: left;
        }
        
        .slider-item input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--accent-color);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .slider-item input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider-item input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider-item span {
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            font-size: 14px;
            min-width: 25px;
        }

        .aroma-name-input,
        .radar-label-input {
            border: 1px solid var(--accent-color);
            border-radius: 3px;
            padding: 2px 4px;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
            background: white;
            width: 80px;
            text-align: left;
        }

        .aroma-name-input:focus,
        .radar-label-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: #fff;
        }

        .svg-chart-label {
            font-family: Garamond;
            font-size: 14px;
            fill: var(--dark-color);
        }

        .svg-chart-legend-box {
            fill: rgba(var(--rgb-primary-color),0.5);
            stroke: var(--primary-color);
            stroke-width: 1;
        }
        .svg-chart-legend-text {
            font-family: Garamond;
            font-size: 12px;
            fill: var(--dark-color);
        }
        
        .edit-mode-indicator {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            display: none;
        }
        
        .edit-mode-indicator.active {
            display: block;
        }

        /* Premium badge for single vineyard */
        .premium-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-color);
            color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
        }
        
        @media (max-width: 768px) {
            .content {
                padding: 10px;
            }

            .wine-card,
            .chart-row,
            .specs,
            .flavor-profile {
                grid-template-columns: 1fr;
            }

            .chart-row {
                gap: 30px; 
            }

            .spec-item {
                flex-direction: column;
                gap: 4px;
            }

            .spec-item strong {
                min-width: auto;
            }

            .edit-controls {
                position: static;
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
                margin-bottom: 20px;
            }

            .edit-mode-indicator {
                position: static;
                transform: none;
                text-align: center;
                margin-bottom: 10px;
            }

            .chart-container.editing,
            .chart-row.editing {
                min-height: unset;
                padding-bottom: 0;
                margin-bottom: 0;
            }

            .radar-chart,
            .aroma-chart {
                width: 100%;
                height: auto;
                aspect-ratio: 4 / 3;
                margin: 0;
            }

            .chart-wrapper {
                margin: 0;
                padding: 0;
            }
            
            .chart-wrapper:first-child {
                padding-bottom: 20px;
                border-bottom: 1px solid var(--accent-color);
            }

            .chart-editor {
                margin-top: 15px;
                padding: 15px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .chart-editor.active {
                margin-bottom: 20px;
            }

            .slider-item {
                grid-template-columns: 80px 1fr 30px;
                gap: 8px;
                padding: 8px;
            }

            .slider-item label {
                font-size: 12px;
            }

            .aroma-name-input,
            .radar-label-input {
                width: 70px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
   

    <header>
        <h1><span class="editable" data-field="winery">Pio Cesare</span> - <span class="editable" data-field="wineName">Barolo Mosconi</span> <span class="editable" data-field="vintage">2018</span> 
            <div class="wine-type-indicator editable" data-field="wineType">
                <span id="wineTypeDisplay">Red</span>
                <select id="wineTypeSelect" style="display: none;">
                    <option value="Red">Red</option>
                    <option value="White">White</option>
                    <option value="Rosé">Rosé</option>
                    <option value="Sparkling">Sparkling</option>
                </select>
            </div>
            <span id="wineTypeInstruction">(Click to change type)</span>
        </h1>
    </header>
    
    <div class="content" id="wineCard">
        <div class="card-container">
            <div class="premium-badge">Single Vineyard</div>
            <div class="logo-background">
                <img src="gcaLogo.png" alt="Wine logo" onerror="this.style.display='none'">
            </div>
            <div class="wine-card">
                <div class="wine-info">
                    <h1 class="editable" data-field="fullWineName">Barolo Mosconi DOCG 2018</h1>
                    <h2 class="editable" data-field="classification">DOCG Barolo - Single Vineyard</h2>
                    <div class="specs">
                        <div class="spec-item">
                            <strong>Producer:</strong>
                            <span class="editable" data-field="producer">Pio Cesare</span>
                        </div>
                        <div class="spec-item">
                            <strong>Grapes:</strong>
                            <span class="editable" data-field="grapes">100% Nebbiolo</span>
                        </div>
                        <div class="spec-item">
                            <strong>Vintage:</strong>
                            <span class="editable" data-field="vintageSpec">2018</span>
                        </div>
                        <div class="spec-item">
                            <strong>Alcohol Content:</strong>
                            <span class="editable" data-field="alcohol">14.5%</span>
                        </div>
                        <div class="spec-item">
                            <strong>Aging:</strong>
                            <span class="editable" data-field="aging">30 months in oak botti, small portion 12 months in French barriques</span>
                        </div>
                        <div class="spec-item">
                            <strong>Serving Temperature:</strong>
                            <span class="editable" data-field="servingTemp">18-20°C</span>
                        </div>
                        <div class="spec-item">
                            <strong>Aging Potential:</strong>
                            <span class="editable" data-field="cellaring">2025-2042, exceptional longevity</span>
                        </div>
                    </div>
                </div>
                <div class="wine-summary">
                    <h3><span class="editable" data-field="vintageYear">Mosconi</span> Grand Cru</h3>
                    <p class="editable" data-field="vintageDescription">From oldest Nebbiolo vines (1945-1971) in the prestigious 10-hectare Mosconi vineyard in Monforte d'Alba. Acquired by Pio Boffa for his 60th birthday in 2014. First vintage 2015. Only 5,000 bottles produced annually from this grand cru site.</p>
                    <h3>Ideal Food Pairings</h3>
                    <p class="editable" data-field="foodPairings">Aged steaks, wild game, white truffles, aged Parmigiano, brasato al Barolo, rack of lamb, mature cheeses</p>
                </div>
            </div>
        </div>
        
        <div class="card-container">
            <div class="logo-background">
                <img src="gcaLogo.png" alt="Wine logo" onerror="this.style.display='none'">
            </div>
            <div class="chart-container">
                <h2 class="chart-title">Organoleptic Profile</h2>
                <div class="chart-row">
                    <div class="chart-wrapper">
                        <div class="radar-chart chart-clickable">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300" width="100%" height="100%" id="radarChart">
                                <text x="200" y="30" font-family="Garamond" font-size="18" fill="var(--primary-color)" text-anchor="middle" font-weight="bold">Body and Structure</text>
                                
                                <polygon points="200,70 270,110 270,190 200,230 130,190 130,110" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <polygon points="200,90 250,120 250,180 200,210 150,180 150,120" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <polygon points="200,110 230,130 230,170 200,190 170,170 170,130" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                
                                <line x1="200" y1="150" x2="200" y2="70" stroke="#888888" stroke-width="1"/>
                                <line x1="200" y1="150" x2="270" y2="190" stroke="#888888" stroke-width="1"/>
                                <line x1="200" y1="150" x2="270" y2="110" stroke="#888888" stroke-width="1"/>
                                <line x1="200" y1="150" x2="200" y2="230" stroke="#888888" stroke-width="1"/>
                                <line x1="200" y1="150" x2="130" y2="190" stroke="#888888" stroke-width="1"/>
                                <line x1="200" y1="150" x2="130" y2="110" stroke="#888888" stroke-width="1"/>
                                
                                <text id="radarLabelBody" x="200" y="65" class="svg-chart-label" text-anchor="middle">Body</text>
                                <text id="radarLabelTannins" x="280" y="110" class="svg-chart-label" text-anchor="start">Tannins</text>
                                <text id="radarLabelAlcohol" x="280" y="190" class="svg-chart-label" text-anchor="start">Alcohol</text>
                                <text id="radarLabelPersistence" x="200" y="240" class="svg-chart-label" text-anchor="middle">Persistence</text>
                                <text id="radarLabelAcidity" x="120" y="190" class="svg-chart-label" text-anchor="end">Acidity</text>
                                <text id="radarLabelComplexity" x="120" y="110" class="svg-chart-label" text-anchor="end">Complexity</text>
                                
                                <polygon id="dataPolygon" points="200,78 261,110 263,166 200,174 136,174 136,110" fill="rgba(var(--rgb-primary-color),0.5)" stroke="var(--primary-color)" stroke-width="2"/>
                                
                                <circle id="point1" cx="200" cy="78" r="4" fill="var(--primary-color)"/>
                                <circle id="point2" cx="261" cy="110" r="4" fill="var(--primary-color)"/>
                                <circle id="point3" cx="263" cy="166" r="4" fill="var(--primary-color)"/>
                                <circle id="point4" cx="200" cy="174" r="4" fill="var(--primary-color)"/>
                                <circle id="point5" cx="136" cy="174" r="4" fill="var(--primary-color)"/>
                                <circle id="point6" cx="136" cy="110" r="4" fill="var(--primary-color)"/>
                                
                                <rect x="155" y="260" width="10" height="10" class="svg-chart-legend-box" />
                                <text x="170" y="268" class="svg-chart-legend-text" id="radarChartLegendText">Barolo Mosconi 2018</text>

                            </svg>
                        </div>
                        <div class="chart-editor" id="radarEditor">
                            <h4>Edit Structure Profile</h4>
                            <div class="slider-group">
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="bodyName" value="Body">
                                    <input type="range" min="1" max="10" value="9" id="bodySlider">
                                    <span id="bodyValue">9</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="tanninsName" value="Tannins">
                                    <input type="range" min="1" max="10" value="9" id="tanninsSlider">
                                    <span id="tanninsValue">9</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="alcoholName" value="Alcohol">
                                    <input type="range" min="1" max="10" value="8" id="alcoholSlider">
                                    <span id="alcoholValue">8</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="persistenceName" value="Persistence">
                                    <input type="range" min="1" max="10" value="10" id="persistenceSlider">
                                    <span id="persistenceValue">10</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="acidityName" value="Acidity">
                                    <input type="range" min="1" max="10" value="7" id="aciditySlider">
                                    <span id="acidityValue">7</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="radar-label-input" id="complexityName" value="Complexity">
                                    <input type="range" min="1" max="10" value="10" id="complexitySlider">
                                    <span id="complexityValue">10</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <div class="aroma-chart chart-clickable">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 350" width="100%" height="100%" id="aromaChart">
                                <text x="200" y="30" font-family="Garamond" font-size="18" fill="var(--primary-color)" text-anchor="middle" font-weight="bold">Aromatic Profile</text>
                                
                                <rect x="120" y="70" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <rect x="120" y="105" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <rect x="120" y="175" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <rect x="120" y="210" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <rect x="120" y="245" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                <rect x="120" y="280" width="200" height="25" fill="var(--light-bg-color)" stroke="var(--accent-color)" stroke-width="1"/>
                                
                                <text id="aromaLabel1" x="115" y="87" class="svg-chart-label" text-anchor="end">Dark Cherry</text>
                                <text id="aromaLabel2" x="115" y="122" class="svg-chart-label" text-anchor="end">Plum</text>
                                <text id="aromaLabel3" x="115" y="157" class="svg-chart-label" text-anchor="end">Rose Petal</text>
                                <text id="aromaLabel4" x="115" y="192" class="svg-chart-label" text-anchor="end">Tar</text>
                                <text id="aromaLabel5" x="115" y="227" class="svg-chart-label" text-anchor="end">Licorice</text>
                                <text id="aromaLabel6" x="115" y="262" class="svg-chart-label" text-anchor="end">Cedar</text>
                                <text id="aromaLabel7" x="115" y="297" class="svg-chart-label" text-anchor="end">Eucalyptus</text>
                                
                                <rect id="redFruitBar" x="120" y="70" width="180" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="blackFruitBar" x="120" y="105" width="180" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="floralBar" x="120" y="140" width="140" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="vanillaBar" x="120" y="175" width="160" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="spiceBar" x="120" y="210" width="160" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="earthBar" x="120" y="245" width="120" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                <rect id="coffeeBar" x="120" y="280" width="100" height="25" fill="rgba(var(--rgb-primary-color),0.7)"/>
                                
                                <text x="120" y="325" font-family="Garamond" font-size="12" fill="var(--dark-color)">Low</text>
                                <text x="220" y="325" font-family="Garamond" font-size="12" fill="var(--dark-color)" text-anchor="middle">Medium</text>
                                <text x="320" y="325" font-family="Garamond" font-size="12" fill="var(--dark-color)" text-anchor="end">High</text>
                                <line x1="120" y1="330" x2="320" y2="330" stroke="#888888" stroke-width="1"/>
                                <line x1="120" y1="328" x2="120" y2="332" stroke="#888888" stroke-width="1"/>
                                <line x1="220" y1="328" x2="220" y2="332" stroke="#888888" stroke-width="1"/>
                                <line x1="320" y1="328" x2="320" y2="332" stroke="#888888" stroke-width="1"/>
                            </svg>
                        </div>
                        <div class="chart-editor" id="aromaEditor">
                            <h4>Edit Aromatic Profile</h4>
                            <div class="slider-group">
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="redFruitName" value="Dark Cherry">
                                    <input type="range" min="0" max="200" value="180" id="redFruitSlider">
                                    <span id="redFruitValue">9</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="blackFruitName" value="Plum">
                                    <input type="range" min="0" max="200" value="180" id="blackFruitSlider">
                                    <span id="blackFruitValue">9</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="floralName" value="Rose Petal">
                                    <input type="range" min="0" max="200" value="140" id="floralSlider">
                                    <span id="floralValue">7</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="vanillaName" value="Tar">
                                    <input type="range" min="0" max="200" value="160" id="vanillaSlider">
                                    <span id="vanillaValue">8</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="spiceName" value="Licorice">
                                    <input type="range" min="0" max="200" value="160" id="spiceSlider">
                                    <span id="spiceValue">8</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="earthName" value="Cedar">
                                    <input type="range" min="0" max="200" value="120" id="earthSlider">
                                    <span id="earthValue">6</span>
                                </div>
                                <div class="slider-item">
                                    <input type="text" class="aroma-name-input" id="coffeeName" value="Eucalyptus">
                                    <input type="range" min="0" max="200" value="100" id="coffeeSlider">
                                    <span id="coffeeValue">5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card-container">
            <div class="logo-background">
                <img src="gcaLogo.png" alt="Wine logo" onerror="this.style.display='none'">
            </div>
            <div class="chart-container">
                <h2 class="chart-title">Tasting Notes</h2>
                <div class="flavor-profile">
                    <div class="flavor-category">
                        <h3>Visual</h3>
                        <p class="editable" data-field="visual">Deep, intense color with excellent viscosity. Dark ruby with garnet reflections, showing the concentration and depth of old vine fruit from this premier site.</p>
                    </div>
                    <div class="flavor-category">
                        <h3>Olfactory</h3>
                        <p class="editable" data-field="olfactory">Rich plum and cherry flavors with savory eucalyptus, licorice and clove. Tart fruit aromas culminating with tar, rusted nail and camphor ash. Wild berry fruit, rose petal, crushed stone.</p>
                    </div>
                    <div class="flavor-category">
                        <h3>Gustatory</h3>
                        <p class="editable" data-field="gustatory">Supple, ripe and complex with soft tannins. Terrific balance with dense, refined tannins. Tighter and more compact than Ornato, direct, linear and powerful. Lingering steeped fruit and savory notes. Very long life.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>&copy;<span class="editable" data-field="author">Gran Caffe l'Aquila</span> <span class="editable" data-field="year">2025</span> - <span class="editable" data-field="footerWinery">An Evening In Alba</span> - <span class="editable" data-field="footerWine">Pio Cesare Barolo Mosconi DOCG</span>. Consume responsibly.</p>
    </footer>

    <script>
        let editMode = false;
        let wineData = {
            // Barolo Mosconi premium values - maximum expression
            radar: {
                body: 9,
                tannins: 9,
                alcohol: 8,
                persistence: 10,
                acidity: 7,
                complexity: 10
            },
            radarLabels: {
                body: "Body",
                tannins: "Tannins",
                alcohol: "Alcohol",
                persistence: "Persistence",
                acidity: "Acidity",
                complexity: "Complexity"
            },
            // Barolo Mosconi premium aromatic profile
            aroma: {
                redFruit: 180,
                blackFruit: 180,
                floral: 140,
                vanilla: 160,
                spice: 160,
                earth: 120,
                coffee: 100
            },
            // Premium Barolo aroma descriptors
            aromaNames: {
                redFruit: "Dark Cherry",
                blackFruit: "Plum",
                floral: "Rose Petal",
                vanilla: "Tar",
                spice: "Licorice",
                earth: "Cedar",
                coffee: "Eucalyptus"
            },
            wineType: "Red"
        };

        // Function to define color themes
        function getColorTheme(wineType) {
            switch(wineType) {
                case 'White':
                    return {
                        primary: '#83742a',
                        accent: '#f0e68c',
                        dark: '#5f5527',
                        lightBg: '#fcfbf7',
                        rgbPrimary: '131,116,42'
                    };
                case 'Rosé':
                    return {
                        primary: '#c06377',
                        accent: '#f7cad0',
                        dark: '#904756',
                        lightBg: '#fdf5f7',
                        rgbPrimary: '192,99,119'
                    };
                case 'Sparkling':
                    return {
                        primary: '#7d7f89',
                        accent: '#d0d0d8',
                        dark: '#4e5057',
                        lightBg: '#f9f9fb',
                        rgbPrimary: '125,127,137'
                    };
                case 'Red':
                default:
                    return {
                        primary: '#4a0e0b',
                        accent: '#ddc074',
                        dark: '#1a0606',
                        lightBg: '#faf9f5',
                        rgbPrimary: '74,14,11'
                    };
            }
        }

        // Function to apply the color theme
        function applyColorTheme(wineType) {
            const theme = getColorTheme(wineType);
            document.documentElement.style.setProperty('--primary-color', theme.primary);
            document.documentElement.style.setProperty('--accent-color', theme.accent);
            document.documentElement.style.setProperty('--dark-color', theme.dark);
            document.documentElement.style.setProperty('--light-bg-color', theme.lightBg);
            document.documentElement.style.setProperty('--rgb-primary-color', theme.rgbPrimary);
            updateRadarChart();
            updateAromaChart();
        }

        // Toggle edit mode
        function toggleEditMode() {
            editMode = !editMode;
            const editables = document.querySelectorAll('.editable');
            const editIndicator = document.getElementById('editIndicator');
            const saveBtn = document.querySelector('.save-btn');
            const editBtn = document.querySelector('.edit-btn');
            const chartEditors = document.querySelectorAll('.chart-editor');
            const cardContainers = document.querySelectorAll('.card-container');
            const chartRows = document.querySelectorAll('.chart-row');
            const body = document.body;

            const wineTypeDisplay = document.getElementById('wineTypeDisplay');
            const wineTypeSelect = document.getElementById('wineTypeSelect');
            const wineTypeIndicatorDiv = document.querySelector('.wine-type-indicator[data-field="wineType"]');
            const wineTypeInstruction = document.getElementById('wineTypeInstruction');

            if (editMode) {
                editIndicator.classList.add('active');
                saveBtn.style.display = 'block';
                editBtn.textContent = '❌ Exit Edit';
                editBtn.style.backgroundColor = '#c44536';
                body.classList.add('edit-mode'); 
                
                cardContainers.forEach(container => {
                    container.classList.add('editing');
                });
                chartRows.forEach(row => {
                    row.classList.add('editing');
                });

                chartEditors.forEach(editor => {
                    editor.classList.add('active');
                });

                editables.forEach(element => {
                    if (element.dataset.field !== "wineType") {
                        element.setAttribute('contenteditable', 'true');
                    }
                    element.classList.add('editing');
                });

                wineTypeDisplay.style.display = 'none';
                wineTypeSelect.style.display = 'inline-block';
                wineTypeSelect.value = wineData.wineType;
                wineTypeIndicatorDiv.classList.add('editing');
                wineTypeInstruction.style.display = 'inline';
            } else {
                editIndicator.classList.remove('active');
                saveBtn.style.display = 'none';
                editBtn.textContent = '✏️ Edit Mode';
                editBtn.style.backgroundColor = 'var(--primary-color)';
                body.classList.remove('edit-mode'); 

                cardContainers.forEach(container => {
                    container.classList.remove('editing');
                });
                chartRows.forEach(row => {
                    row.classList.remove('editing');
                });

                chartEditors.forEach(editor => {
                    editor.classList.remove('active');
                });

                editables.forEach(element => {
                    element.removeAttribute('contenteditable');
                    element.classList.remove('editing');
                });

                wineTypeDisplay.style.display = 'inline-block';
                wineTypeSelect.style.display = 'none';
                wineTypeDisplay.textContent = wineData.wineType;
                wineTypeIndicatorDiv.classList.remove('editing');
                wineTypeInstruction.style.display = 'none';
            }
        }

        // Function to download the wine card as an image
        async function downloadCard() {
            const cardElement = document.getElementById('wineCard');
            const editControls = document.querySelector('.edit-controls');
            const editIndicator = document.getElementById('editIndicator');
            const wasInEditMode = editMode;

            const targetDesktopWidth = 1000;

            const originalStyle = {
                maxWidth: cardElement.style.maxWidth,
                width: cardElement.style.width,
                boxSizing: cardElement.style.boxSizing,
                padding: cardElement.style.padding
            };

            if (wasInEditMode) {
                toggleEditMode();
            }
            editControls.style.display = 'none';
            editIndicator.style.display = 'none';

            cardElement.style.maxWidth = `${targetDesktopWidth}px`;
            cardElement.style.width = `${targetDesktopWidth}px`;
            cardElement.style.boxSizing = 'border-box';

            await new Promise(resolve => setTimeout(resolve, 50)); 

            try {
                const canvas = await html2canvas(cardElement, {
                    scale: 2,
                    useCORS: true,
                    logging: true,
                    allowTaint: true
                });

                const link = document.createElement('a');
                link.download = 'pio-cesare-barolo-mosconi-wine-card.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (error) {
                console.error("Error generating image:", error);
            } finally {
                cardElement.style.maxWidth = originalStyle.maxWidth;
                cardElement.style.width = originalStyle.width;
                cardElement.style.boxSizing = originalStyle.boxSizing;
                cardElement.style.padding = originalStyle.padding;

                editControls.style.display = 'flex';
                if (wasInEditMode) {
                    toggleEditMode();
                } else {
                    editIndicator.style.display = 'none';
                }
            }
        }

        function saveChanges() {
            toggleEditMode();
        }

        function resetToDefault() {
            const defaultValues = {
                winery: "Pio Cesare",
                wineName: "Barolo Mosconi",
                vintage: "2018",
                wineType: "Red",
                fullWineName: "Barolo Mosconi DOCG 2018",
                classification: "DOCG Barolo - Single Vineyard",
                producer: "Pio Cesare",
                grapes: "100% Nebbiolo",
                vintageSpec: "2018",
                alcohol: "14.5%",
                aging: "30 months in oak botti, small portion 12 months in French barriques",
                servingTemp: "18-20°C",
                cellaring: "2025-2042, exceptional longevity",
                vintageYear: "Mosconi",
                vintageDescription: "From oldest Nebbiolo vines (1945-1971) in the prestigious 10-hectare Mosconi vineyard in Monforte d'Alba. Acquired by Pio Boffa for his 60th birthday in 2014. First vintage 2015. Only 5,000 bottles produced annually from this grand cru site.",
                foodPairings: "Aged steaks, wild game, white truffles, aged Parmigiano, brasato al Barolo, rack of lamb, mature cheeses",
                visual: "Deep, intense color with excellent viscosity. Dark ruby with garnet reflections, showing the concentration and depth of old vine fruit from this premier site.",
                olfactory: "Rich plum and cherry flavors with savory eucalyptus, licorice and clove. Tart fruit aromas culminating with tar, rusted nail and camphor ash. Wild berry fruit, rose petal, crushed stone.",
                gustatory: "Supple, ripe and complex with soft tannins. Terrific balance with dense, refined tannins. Tighter and more compact than Ornato, direct, linear and powerful. Lingering steeped fruit and savory notes. Very long life.",
                author: "Pio Cesare",
                year: "2025",
                footerWinery: "Pio Cesare",
                footerWine: "Barolo Mosconi DOCG"
            };

            for (const field in defaultValues) {
                const element = document.querySelector(`[data-field="${field}"]`);
                if (element) {
                    if (field === "wineType") {
                        wineData.wineType = defaultValues[field];
                        document.getElementById('wineTypeDisplay').textContent = defaultValues[field];
                        document.getElementById('wineTypeSelect').value = defaultValues[field];
                        applyColorTheme(defaultValues[field]);
                    } else {
                        element.textContent = defaultValues[field];
                    }
                }
            }

            wineData.radar = {
                body: 9,
                tannins: 9,
                alcohol: 8,
                persistence: 10,
                acidity: 7,
                complexity: 10
            };
            wineData.radarLabels = {
                body: "Body",
                tannins: "Tannins",
                alcohol: "Alcohol",
                persistence: "Persistence",
                acidity: "Acidity",
                complexity: "Complexity"
            };
            wineData.aroma = {
                redFruit: 180,
                blackFruit: 180,
                floral: 140,
                vanilla: 160,
                spice: 160,
                earth: 120,
                coffee: 100
            };
            wineData.aromaNames = {
                redFruit: "Dark Cherry",
                blackFruit: "Plum",
                floral: "Rose Petal",
                vanilla: "Tar",
                spice: "Licorice",
                earth: "Cedar",
                coffee: "Eucalyptus"
            };

            updateRadarChart();
            updateAromaChart();

            // Reset all sliders and inputs
            document.getElementById('bodySlider').value = wineData.radar.body;
            document.getElementById('bodyValue').textContent = wineData.radar.body;
            document.getElementById('tanninsSlider').value = wineData.radar.tannins;
            document.getElementById('tanninsValue').textContent = wineData.radar.tannins;
            document.getElementById('alcoholSlider').value = wineData.radar.alcohol;
            document.getElementById('alcoholValue').textContent = wineData.radar.alcohol;
            document.getElementById('persistenceSlider').value = wineData.radar.persistence;
            document.getElementById('persistenceValue').textContent = wineData.radar.persistence;
            document.getElementById('aciditySlider').value = wineData.radar.acidity;
            document.getElementById('acidityValue').textContent = wineData.radar.acidity;
            document.getElementById('complexitySlider').value = wineData.radar.complexity;
            document.getElementById('complexityValue').textContent = wineData.radar.complexity;

            document.getElementById('redFruitSlider').value = wineData.aroma.redFruit;
            document.getElementById('redFruitValue').textContent = Math.round(wineData.aroma.redFruit / 20);
            document.getElementById('blackFruitSlider').value = wineData.aroma.blackFruit;
            document.getElementById('blackFruitValue').textContent = Math.round(wineData.aroma.blackFruit / 20);
            document.getElementById('floralSlider').value = wineData.aroma.floral;
            document.getElementById('floralValue').textContent = Math.round(wineData.aroma.floral / 20);
            document.getElementById('vanillaSlider').value = wineData.aroma.vanilla;
            document.getElementById('vanillaValue').textContent = Math.round(wineData.aroma.vanilla / 20);
            document.getElementById('spiceSlider').value = wineData.aroma.spice;
            document.getElementById('spiceValue').textContent = Math.round(wineData.aroma.spice / 20);
            document.getElementById('earthSlider').value = wineData.aroma.earth;
            document.getElementById('earthValue').textContent = Math.round(wineData.aroma.earth / 20);
            document.getElementById('coffeeSlider').value = wineData.aroma.coffee;
            document.getElementById('coffeeValue').textContent = Math.round(wineData.aroma.coffee / 20);

            // Reset name inputs
            document.getElementById('redFruitName').value = wineData.aromaNames.redFruit;
            document.getElementById('blackFruitName').value = wineData.aromaNames.blackFruit;
            document.getElementById('floralName').value = wineData.aromaNames.floral;
            document.getElementById('vanillaName').value = wineData.aromaNames.vanilla;
            document.getElementById('spiceName').value = wineData.aromaNames.spice;
            document.getElementById('earthName').value = wineData.aromaNames.earth;
            document.getElementById('coffeeName').value = wineData.aromaNames.coffee;

            document.getElementById('bodyName').value = wineData.radarLabels.body;
            document.getElementById('tanninsName').value = wineData.radarLabels.tannins;
            document.getElementById('alcoholName').value = wineData.radarLabels.alcohol;
            document.getElementById('persistenceName').value = wineData.radarLabels.persistence;
            document.getElementById('acidityName').value = wineData.radarLabels.acidity;
            document.getElementById('complexityName').value = wineData.radarLabels.complexity;
        }

        // Make charts clickable
        document.querySelectorAll('.chart-clickable').forEach(chart => {
            chart.addEventListener('click', function() {
                if (editMode) {
                    const editor = this.nextElementSibling;
                    if (editor && editor.classList.contains('chart-editor')) {
                        editor.classList.toggle('active');
                    }
                }
            });
        });

        // Radar chart update logic
        const radarSliders = ['body', 'tannins', 'alcohol', 'persistence', 'acidity', 'complexity'];
        radarSliders.forEach(metric => {
            const slider = document.getElementById(`${metric}Slider`);
            const valueSpan = document.getElementById(`${metric}Value`);
            const nameInput = document.getElementById(`${metric}Name`); 

            slider.addEventListener('input', () => {
                wineData.radar[metric] = parseInt(slider.value);
                valueSpan.textContent = slider.value;
                updateRadarChart();
            });

            if (nameInput) {
                nameInput.addEventListener('input', () => {
                    wineData.radarLabels[metric] = nameInput.value;
                    updateRadarChart();
                });
            }
        });

        function updateRadarChart() {
            const values = radarSliders.map(metric => wineData.radar[metric]);
            const centerX = 200;
            const centerY = 150;
            const radius = 80;
            const angleIncrement = (Math.PI * 2) / 6;

            let points = [];
            values.forEach((value, i) => {
                const angle = i * angleIncrement - Math.PI / 2; 
                const r = (value / 10) * radius; 
                const x = centerX + r * Math.cos(angle);
                const y = centerY + r * Math.sin(angle);
                points.push(`${x},${y}`);
                document.getElementById(`point${i + 1}`).setAttribute('cx', x);
                document.getElementById(`point${i + 1}`).setAttribute('cy', y);
            });
            document.getElementById('dataPolygon').setAttribute('points', points.join(' '));

            document.getElementById('radarLabelBody').textContent = wineData.radarLabels.body;
            document.getElementById('radarLabelTannins').textContent = wineData.radarLabels.tannins;
            document.getElementById('radarLabelAlcohol').textContent = wineData.radarLabels.alcohol;
            document.getElementById('radarLabelPersistence').textContent = wineData.radarLabels.persistence;
            document.getElementById('radarLabelAcidity').textContent = wineData.radarLabels.acidity;
            document.getElementById('radarLabelComplexity').textContent = wineData.radarLabels.complexity;
            
            document.getElementById('radarChartLegendText').textContent = document.querySelector('[data-field="fullWineName"]')?.textContent || 'Barolo Mosconi 2018';
        }

        // Aroma chart update logic
        const aromaSliders = ['redFruit', 'blackFruit', 'floral', 'vanilla', 'spice', 'earth', 'coffee'];
        aromaSliders.forEach(aroma => {
            const slider = document.getElementById(`${aroma}Slider`);
            const valueSpan = document.getElementById(`${aroma}Value`);
            const nameInput = document.getElementById(`${aroma}Name`);
            
            slider.addEventListener('input', () => {
                wineData.aroma[aroma] = parseInt(slider.value);
                valueSpan.textContent = Math.round(slider.value / 20); 
                updateAromaChart();
            });

            nameInput.addEventListener('input', () => {
                wineData.aromaNames[aroma] = nameInput.value;
                updateAromaChart();
            });
        });

        function updateAromaChart() {
            aromaSliders.forEach((aroma, index) => {
                const bar = document.getElementById(`${aroma}Bar`);
                const label = document.getElementById(`aromaLabel${index + 1}`);
                const width = wineData.aroma[aroma]; 
                
                bar.setAttribute('width', width);
                
                label.textContent = wineData.aromaNames[aroma];
            });
        }

        // Event listener for wine type dropdown
        document.getElementById('wineTypeSelect').addEventListener('change', function() {
            wineData.wineType = this.value;
            applyColorTheme(wineData.wineType);
        });

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            applyColorTheme(wineData.wineType);
            updateRadarChart();
            updateAromaChart();
        });
    </script>
</body>
</html>